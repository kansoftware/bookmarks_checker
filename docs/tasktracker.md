# Отслеживание задач

## Критические задачи
- [x] Создание базовой структуры проекта
- [x] Реализация парсера закладок Chrome/Yandex (с поддержкой файлов до 10 МБ)
- [x] Реализация асинхронной проверки URL с таймаутами (5 сек) и повторными попытками (3 раза)
- [x] Создание базового GUI с настройками параметров проверки
- [x] Реализация обработки ошибок и таймаутов
- [x] Добавление поддержки редиректов


## Высокий приоритет
- [ ] Реализация анализатора контента с поддержкой LLM
- [x] Генерация markdown файлов с сохранением иерархии
- [ ] Реализация кэширования результатов
- [x] Добавление кнопки Пуск/Стоп и возобновления проверки
- [x] Реализация извлечения заголовков и конвертации в markdown
- [ ] Добавление генерации ключевых слов с помощью LLM
- [ ] Реализация создания кратких описаний с помощью LLM

## Средний приоритет
- [ ] Настройка логирования и отображения прогресса
- [х] Создание конфигурационного файла в формате JSON
- [ ] Реализация многопоточной обработки URL
- [х] Добавление настроек LLM для извлечения ключевых слов
- [ ] Реализация обработки SPA
- [ ] Добавление определения кодировки
- [ ] Реализация пропуска бинарного контента
- [ ] Реализация пропуска потенциально опасных URL

## Низкий приоритет
- [ ] Оптимизация производительности
- [ ] Улучшение UI/UX
- [ ] Добавление статистики
- [ ] Создание документации
- [ ] Реализация обработки тегов
- [ ] Добавление обработки заметок
- [ ] Реализация отдельного хранения приватных закладок

## Завершенные задачи
- [x] Создание документации проекта
- [x] Определение требований и архитектуры
- [x] Выбор технологического стека

## Задача: Реализация обработки ошибок и таймаутов
- **Статус**: Завершена
- **Описание**: Реализация надежной системы обработки ошибок и таймаутов при проверке URL
- **Шаги выполнения**:
  - [x] Реализация базовой обработки таймаутов
  - [x] Добавление механизма повторных попыток
  - [x] Реализация обработки различных типов ошибок (SSL, сетевые)
  - [x] Добавление системы сбора метрик
  - [x] Улучшение логирования
  - [x] Оптимизация конфигурации retry-механизма
- **Зависимости**: Нет

## Задача: Добавление поддержки редиректов
- **Статус**: В процессе
- **Описание**: Добавить возможность корректно обрабатывать HTTP редиректы при проверке URL, включая ограничение на максимальное количество перенаправлений.
- **Шаги выполнения**:
  - [x] Анализ текущей реализации проверки URL.
  - [x] Выбор способа обработки редиректов (настройка httpx/requests или ручная обработка).
  - [x] Реализация следования редиректам.
  - [x] Добавление опции для контроля максимального количества редиректов.
  - [x] Написание тестов для проверки редиректов.
  - [x] Обновление документации.
  - [x] Тестирование и отладка.
- **Зависимости**: Модуль проверки URL

## Задача: Рефакторинг URLChecker для учёта retry_count и метрик
- **Статус**: Завершена
- **Описание**: Переписать логику проверки URL для корректного учёта количества попыток (retry_count), возврата результата после максимальных попыток, и разделения метрик (уникальные/все попытки).
- **Шаги выполнения**:
  - [x] Проанализировать текущую реализацию
  - [x] Внедрить учёт retry_count через tenacity
  - [x] Исправить обработку ошибок для возврата результата после максимальных попыток
  - [x] Разделить метрики на уникальные и все попытки
- **Зависимости**: Тесты в tests/test_checker.py

## Задача: Стабилизация unit-тестов config и logger
- **Статус**: Завершена
- **Описание**: Исправить тесты и реализацию для config и logger, чтобы все unit-тесты проходили.
- **Шаги выполнения**:
  - [x] Проанализировать ошибки тестов
  - [x] Исправить сериализацию/десериализацию и поля в config
  - [x] Добавить поддержку log_file и уровней в setup_logger
  - [x] Привести тесты к актуальной реализации
- **Зависимости**: src/utils/config.py, src/utils/logger.py, tests/unit/test_config.py, tests/unit/test_logger.py

## Задача: Генерация markdown файлов с сохранением иерархии
- **Статус**: Завершена
- **Описание**: Реализация класса для генерации markdown файлов из URL с сохранением структуры директорий
- **Шаги выполнения**:
  - [x] Создание базовой структуры класса MarkdownGenerator
  - [x] Реализация загрузки контента с URL
  - [x] Реализация конвертации HTML в markdown
  - [x] Добавление поддержки создания директорий
  - [x] Написание модульных тестов
  - [x] Обновление документации
- **Зависимости**: 
  - Требует requests для HTTP запросов
  - Требует beautifulsoup4 для парсинга HTML
  - Требует pytest и requests-mock для тестирования 

## Задача: Добавление главного меню и сохранения настроек
- **Статус**: Завершена
- **Описание**: Добавление главного меню в приложение с возможностью сохранения настроек
- **Шаги выполнения**:
  - [x] Создание класса Settings для работы с настройками
  - [x] Реализация сохранения настроек в JSON файл
  - [x] Добавление главного меню
  - [x] Создание окна настроек LLM
  - [x] Интеграция сохранения настроек в главное окно
- **Зависимости**: Нет

## Задача: Реализация генератора markdown файлов
- **Статус**: Завершена
- **Описание**: Создание функционала для конвертации веб-страниц в markdown формат
- **Шаги выполнения**:
  - [x] Создание класса MarkdownGenerator
  - [x] Реализация конвертации HTML в Markdown
  - [x] Добавление поддержки сохранения файлов
  - [x] Написание модульных тестов
- **Зависимости**: Нет 

## Задача: Реализация извлечения заголовков и конвертации в markdown
- **Статус**: Завершена
- **Описание**: Реализация функционала для извлечения заголовков из веб-страниц и конвертации их в markdown формат
- **Шаги выполнения**:
  - [x] Создание класса ProcessingTracker для отслеживания процесса
  - [x] Расширение MarkdownGenerator для улучшенной конвертации
  - [x] Реализация многопоточной обработки контента
  - [x] Добавление поддержки метаданных (заголовки, описания, ключевые слова)
  - [x] Реализация обработки таблиц и списков
  - [x] Добавление поддержки относительных ссылок и изображений
  - [x] Интеграция с основным процессом проверки URL
  - [x] Обновление GUI для поддержки нового функционала
  - [x] Добавление возможности возобновления обработки
  - [x] Тестирование и отладка
- **Зависимости**: 
  - Модуль проверки URL
  - Модуль парсинга закладок 

## Задача: Исправление обработки контента
- **Статус**: Завершена
- **Описание**: Улучшение обработки различных типов контента и исправление проблем с content-type
- **Шаги выполнения**:
  - [x] Добавлена поддержка text/plain
  - [x] Добавлена попытка распознавания HTML независимо от content-type
  - [x] Улучшена обработка ошибок при парсинге
  - [x] Добавлено подробное логирование
  - [x] Обновлена документация
- **Зависимости**: Нет 

## Задача: Улучшение обработки некорректного HTML
- **Статус**: Завершена
- **Описание**: Улучшение обработки некорректного HTML и добавление более устойчивой конвертации в markdown
- **Шаги выполнения**:
  - [x] Добавлен метод _process_links для обработки ссылок
  - [x] Улучшена обработка ошибок при парсинге HTML
  - [x] Добавлена возможность сохранения некорректного HTML как текста
  - [x] Улучшена конвертация HTML в markdown
  - [x] Обновлена документация
- **Зависимости**: Нет 

## Задача: Улучшение форматирования markdown и обработки путей
- **Статус**: Завершена
- **Описание**: Улучшение форматирования markdown и обработки путей в конфигурации
- **Шаги выполнения**:
  - [x] Добавлена обработка таблиц с разделителями заголовков
  - [x] Добавлена обработка нумерованных и ненумерованных списков
  - [x] Улучшено форматирование ссылок и изображений
  - [x] Добавлены свойства для работы с путями в Config
  - [x] Обновлена документация
- **Зависимости**: Нет 

## Задача: Улучшение обработки метаданных и ссылок
- **Статус**: Завершена
- **Описание**: Улучшение обработки метаданных, ссылок и вложенных списков
- **Шаги выполнения**:
  - [x] Добавлена обработка мета-тегов
  - [x] Добавлено отображение источника страницы
  - [x] Улучшена обработка ссылок
  - [x] Улучшена обработка вложенных списков
  - [x] Обновлена документация
- **Зависимости**: Нет

## Задача: Исправление ошибок в тестах
- **Статус**: Завершена
- **Описание**: Исправление выявленных при тестировании ошибок в модулях ProcessingTracker и MarkdownGenerator
- **Шаги выполнения**:
  - [x] Изучить документацию в папке docs/
  - [x] Запустить тесты из папки tests/
  - [x] Выявить ошибки при тестировании
  - [x] Исправить ошибки в ProcessingTracker (метод get_pending_urls)
  - [x] Исправить ошибки в MarkdownGenerator (форматирование нумерованных списков)
  - [x] Проверить, что все тесты проходят (56/56 тестов успешно)
  - [x] Обновить документацию
- **Зависимости**: Завершение предыдущих задач по разработке основного функционала

## Задача: Исправление ошибки импорта
- **Статус**: Завершена
- **Описание**: Исправление ошибки ImportError при запуске приложения из-за неправильного относительного импорта
- **Шаги выполнения**:
  - [x] Анализ ошибки ImportError в content_processor.py
  - [x] Замена относительного импорта `from ..markdown_generator import MarkdownGenerator` на абсолютный `from markdown_generator import MarkdownGenerator`
  - [x] Проверка корректности запуска приложения
  - [x] Обновление документации
- **Зависимости**: Нет

## Задача: Установка отсутствующей зависимости
- **Статус**: Завершена
- **Описание**: Установка пакета `markdown-generator`, который отсутствовал в виртуальном окружении и вызывал `ModuleNotFoundError`.
- **Шаги выполнения**:
  - [x] Активация виртуального окружения.
  - [x] Установка пакета `markdown-generator` с помощью `pip`.
  - [x] Проверка успешной установки.
- **Зависимости**: Нет
