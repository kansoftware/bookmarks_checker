# Bookmarks Checker

## Описание проекта
Программа для проверки доступности закладок из браузеров Chrome/Yandex Browser и создания структурированных описаний в формате Markdown.

## Цели проекта
- Проверка доступности закладок
- Автоматическое создание структурированных описаний
- Сохранение иерархии закладок
- Удобный GUI интерфейс
- Поддержка многопоточной обработки
- Возможность приостановки/возобновления проверки

## Технический стек
- Python 3.x
- PyQt5 для GUI
- virtualenv для изоляции зависимостей
- aiohttp для асинхронных запросов
- beautifulsoup4 для парсинга страниц
- markdown для работы с markdown файлами
- openrouter.ai API для извлечения ключевых слов
- playwright для работы с headless браузером
- requests для HTTP запросов с настраиваемыми заголовками
- tenacity для повторных попыток
- aiofiles для асинхронной работы с файлами
- pydantic для валидации данных
- pytest для тестирования
- black для форматирования кода
- isort для сортировки импортов
- mypy для проверки типов

## Архитектура

### Основные компоненты
1. **GUI Module**
   - Главное окно приложения
   - Настройки браузера и параметров проверки
   - Прогресс проверки с логом
   - Статус бар с информацией о прогрессе
   - Настройки LLM для извлечения ключевых слов и создания описание

2. **Bookmarks Parser**
   - Чтение JSON файла закладок (до 10 МБ)
   - Парсинг структуры
   - Извлечение URL и метаданных
   - Обработка приватных закладок
   - Валидация URL
   - Обработка относительных URL

3. **URL Checker**
   - Асинхронная проверка доступности URL
   - Обработка ошибок и таймаутов (5 сек)
   - Повторные попытки (3 раза)
   - Обработка редиректов (автоматическое следование, настраиваемое максимальное количество)
   - Пропуск потенциально опасных URL

4. **Content Analyzer**
   - Извлечение заголовка
   - Конвертация страниц в markdown
   - Генерация ключевых слов с помощью LLM
   - Создание краткого описания с помощью LLM
   - Пропуск бинарного контента
   - Определение кодировки
   - Обработка SPA

5. **Markdown Generator**
   - Создание markdown файлов
   - Сохранение иерархии
   - Форматирование контента
   - Отдельное хранение приватных закладок
   - Сохранение метаданных
   - Обработка тегов
   - Обработка заметок

6. **Cache Manager**
   - Сохранение прогресса проверки
   - Возможность возобновления с места остановки
   - Кэширование результатов
   - Очистка устаревших данных

7. **Error Handler**
   - Обработка всех типов ошибок
   - Логирование ошибок
   - Повторные попытки
   - Уведомления пользователя

### Структура проекта
```
bookmarks_checker/
├── src/
│   ├── gui/
│   │   ├── main_window.py
│   │   ├── settings_dialog.py
│   │   └── widgets/
│   ├── core/
│   │   ├── parser.py
│   │   ├── checker.py
│   │   ├── analyzer.py
│   │   ├── generator.py
│   │   └── cache.py
│   └── utils/
│       ├── config.py
│       └── logger.py
├── tests/
├── docs/
├── requirements.txt
└── README.md
```

## Этапы разработки
1. Базовая структура проекта
2. Парсинг закладок
3. Проверка URL
4. Анализ контента
5. Генерация markdown
6. GUI интерфейс
7. Тестирование
8. Оптимизация

## Требования к качеству
- Покрытие тестами > 80%
- Обработка всех возможных ошибок
- Логирование всех операций
- Конфигурируемые таймауты и повторные попытки
- Многопоточная обработка
- Кэширование результатов

## Стандарты кода
- PEP 8
- Type hints
- Docstrings
- Модульные тесты
- Логирование

## Безопасность
- Пропуск потенциально опасных URL
- Безопасная обработка URL
- Логирование ошибок
- Примечания о SSL и конфиденциальности 