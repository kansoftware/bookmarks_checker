# Дневник проекта

## 2025-05-31

### Добавлено
- Реализована асинхронная проверка URL в отдельном потоке
- Добавлена возможность остановки проверки
- Реализовано логирование результатов проверки в GUI
- Добавлена обработка ошибок при проверке URL

### Изменено
- Улучшен механизм парсинга закладок для корректной обработки URL
- Оптимизирована работа с асинхронными операциями

### Исправлено
- Исправлена ошибка при обработке закладок в GUI
- Улучшена обработка ошибок при парсинге файла закладок

## 2025-06-01

### Наблюдения
- Проект требует четкой структуры для удобной разработки
- Необходимо учитывать различные форматы закладок браузеров
- Важна производительность при проверке большого количества URL
- Требуется поддержка многопоточной обработки
- Необходима возможность приостановки/возобновления проверки

### Решения
- Выбрана модульная архитектура с четким разделением ответственности
- Решено использовать асинхронные запросы для проверки URL
- Принято решение о сохранении иерархии закладок в markdown файлах
- Добавлен компонент кэширования для сохранения прогресса
- Выбрана интеграция с openrouter.ai для извлечения ключевых слов и описания

### Проблемы
- Необходимо решить вопрос с обработкой недоступных URL
- Требуется определить оптимальный способ извлечения ключевых слов
- Нужно продумать механизм обновления существующих markdown файлов
- Необходимо реализовать безопасную обработку потенциально опасных URL
- Требуется оптимизировать многопоточную обработку URL

### Добавлено
- Расширенная обработка различных типов ошибок (SSL, сетевые, таймауты)
- Система сбора метрик для мониторинга успешности запросов
- Измерение времени ответа для каждого URL
- Отслеживание количества попыток повторного подключения

### Изменено
- Улучшен механизм повторных попыток с более гибкой конфигурацией
- Обновлена модель URLResponse с дополнительными полями для метрик
- Улучшено логирование ошибок с более детальной информацией

### Исправлено
- Добавлена корректная обработка SSL-ошибок
- Улучшена обработка сетевых ошибок
- Оптимизирована работа с таймаутами

## [2025-06-02] - Рефакторинг URLChecker: учёт попыток и метрик
### Изменено
- Переписан механизм учёта количества попыток (retry_count) при проверке URL
- Исправлена обработка ошибок: теперь после максимального количества попыток возвращается корректный результат, а не исключение
- Метрики разделены на уникальные запросы (unique_requests) и общее количество попыток (total_requests)

## [2025-06-02] - Стабилизация unit-тестов config и logger
### Исправлено
- Исправлены тесты и реализация для config: корректная сериализация/десериализация, поддержка всех необходимых полей
- Улучшен setup_logger: добавлена поддержка log_file и корректная работа с уровнями логирования
- Все unit-тесты для config и logger теперь проходят

## [2025-06-03] - Начало реализации поддержки редиректов
### Добавлено
- Начата реализация функционала следования редиректам при проверке URL.

## [2025-06-04] - Добавлено главное меню и сохранение настроек

### Добавлено
- Главное меню с пунктами:
  - Завершить работу
  - Настройки LLM
  - Об авторе (ссылка на kansoftware.ru)
- Сохранение и загрузка настроек в ~/.config/BookmarksChecker.json
- Окно настроек LLM с возможностью настройки модели, API ключа и базового URL
- Автоматическое сохранение размера и позиции окна
- Генерация markdown файлов с сохранением иерархии

### Изменено
- Обновлен класс конфигурации для поддержки сохранения настроек
- Улучшена структура кода с разделением на модули

### Исправлено
- Исправлено сохранение настроек при закрытии приложения 